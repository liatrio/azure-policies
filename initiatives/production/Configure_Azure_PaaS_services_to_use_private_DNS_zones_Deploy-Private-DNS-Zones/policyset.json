{
 "properties": {
  "displayName": "Configure Azure PaaS services to use private DNS zones",
  "policyType": "Custom",
  "description": "This policy initiative is a group of policies that ensures private endpoints to Azure PaaS services are integrated with Azure Private DNS zones",
  "metadata": {
   "category": "Network",
   "version": "1.0.0",
   "updatedBy": null,
   "updatedOn": null
  },
  "parameters": {
   "azureAcrPrivateDnsZoneId": {
    "type": "string",
    "metadata": {
     "description": "Private DNS Zone Identifier",
     "displayName": "azureAcrPrivateDnsZoneId",
     "strongType": "Microsoft.Network/privateDnsZones"
    }
   },
   "azureAppPrivateDnsZoneId": {
    "type": "string",
    "metadata": {
     "description": "Private DNS Zone Identifier",
     "displayName": "azureAppPrivateDnsZoneId",
     "strongType": "Microsoft.Network/privateDnsZones"
    }
   },
   "azureAppServicesPrivateDnsZoneId": {
    "type": "string",
    "metadata": {
     "description": "Private DNS Zone Identifier",
     "displayName": "azureAppServicesPrivateDnsZoneId",
     "strongType": "Microsoft.Network/privateDnsZones"
    }
   },
   "azureAsrPrivateDnsZoneId": {
    "type": "string",
    "metadata": {
     "description": "Private DNS Zone Identifier",
     "displayName": "azureAsrPrivateDnsZoneId",
     "strongType": "Microsoft.Network/privateDnsZones"
    }
   },
   "azureBatchPrivateDnsZoneId": {
    "type": "string",
    "metadata": {
     "description": "Private DNS Zone Identifier",
     "displayName": "azureBatchPrivateDnsZoneId",
     "strongType": "Microsoft.Network/privateDnsZones"
    }
   },
   "azureCognitiveSearchPrivateDnsZoneId": {
    "type": "string",
    "metadata": {
     "description": "Private DNS Zone Identifier",
     "displayName": "azureCognitiveSearchPrivateDnsZoneId",
     "strongType": "Microsoft.Network/privateDnsZones"
    }
   },
   "azureCognitiveServicesPrivateDnsZoneId": {
    "type": "string",
    "metadata": {
     "description": "Private DNS Zone Identifier",
     "displayName": "azureCognitiveServicesPrivateDnsZoneId",
     "strongType": "Microsoft.Network/privateDnsZones"
    }
   },
   "azureDiskAccessPrivateDnsZoneId": {
    "type": "string",
    "metadata": {
     "description": "Private DNS Zone Identifier",
     "displayName": "azureDiskAccessPrivateDnsZoneId",
     "strongType": "Microsoft.Network/privateDnsZones"
    }
   },
   "azureEventGridDomainsPrivateDnsZoneId": {
    "type": "string",
    "metadata": {
     "description": "Private DNS Zone Identifier",
     "displayName": "azureEventGridDomainsPrivateDnsZoneId",
     "strongType": "Microsoft.Network/privateDnsZones"
    }
   },
   "azureEventGridTopicsPrivateDnsZoneId": {
    "type": "string",
    "metadata": {
     "description": "Private DNS Zone Identifier",
     "displayName": "azureEventGridTopicsPrivateDnsZoneId",
     "strongType": "Microsoft.Network/privateDnsZones"
    }
   },
   "azureEventHubNamespacePrivateDnsZoneId": {
    "type": "string",
    "metadata": {
     "description": "Private DNS Zone Identifier",
     "displayName": "azureEventHubNamespacePrivateDnsZoneId",
     "strongType": "Microsoft.Network/privateDnsZones"
    }
   },
   "azureFilePrivateDnsZoneId": {
    "type": "string",
    "metadata": {
     "description": "Private DNS Zone Identifier",
     "displayName": "azureFilePrivateDnsZoneId",
     "strongType": "Microsoft.Network/privateDnsZones"
    }
   },
   "azureIotHubsPrivateDnsZoneId": {
    "type": "string",
    "metadata": {
     "description": "Private DNS Zone Identifier",
     "displayName": "azureIotHubsPrivateDnsZoneId",
     "strongType": "Microsoft.Network/privateDnsZones"
    }
   },
   "azureIotPrivateDnsZoneId": {
    "type": "string",
    "metadata": {
     "description": "Private DNS Zone Identifier",
     "displayName": "azureIotPrivateDnsZoneId",
     "strongType": "Microsoft.Network/privateDnsZones"
    }
   },
   "azureKeyVaultPrivateDnsZoneId": {
    "type": "string",
    "metadata": {
     "description": "Private DNS Zone Identifier",
     "displayName": "azureKeyVaultPrivateDnsZoneId",
     "strongType": "Microsoft.Network/privateDnsZones"
    }
   },
   "azureMachineLearningWorkspacePrivateDnsZoneId": {
    "type": "string",
    "metadata": {
     "description": "Private DNS Zone Identifier",
     "displayName": "azureMachineLearningWorkspacePrivateDnsZoneId",
     "strongType": "Microsoft.Network/privateDnsZones"
    }
   },
   "azureRedisCachePrivateDnsZoneId": {
    "type": "string",
    "metadata": {
     "description": "Private DNS Zone Identifier",
     "displayName": "azureRedisCachePrivateDnsZoneId",
     "strongType": "Microsoft.Network/privateDnsZones"
    }
   },
   "azureServiceBusNamespacePrivateDnsZoneId": {
    "type": "string",
    "metadata": {
     "description": "Private DNS Zone Identifier",
     "displayName": "azureServiceBusNamespacePrivateDnsZoneId",
     "strongType": "Microsoft.Network/privateDnsZones"
    }
   },
   "azureSignalRPrivateDnsZoneId": {
    "type": "string",
    "metadata": {
     "description": "Private DNS Zone Identifier",
     "displayName": "azureSignalRPrivateDnsZoneId",
     "strongType": "Microsoft.Network/privateDnsZones"
    }
   },
   "azureWebPrivateDnsZoneId": {
    "type": "string",
    "metadata": {
     "description": "Private DNS Zone Identifier",
     "displayName": "azureWebPrivateDnsZoneId",
     "strongType": "Microsoft.Network/privateDnsZones"
    }
   },
   "effect": {
    "type": "string",
    "metadata": {
     "description": "Enable or disable the execution of the policy",
     "displayName": "Effect"
    },
    "allowedValues": [
     "DeployIfNotExists",
     "Disabled"
    ],
    "defaultValue": "DeployIfNotExists"
   },
   "effect1": {
    "type": "string",
    "metadata": {
     "description": "Enable or disable the execution of the policy",
     "displayName": "Effect"
    },
    "allowedValues": [
     "deployIfNotExists",
     "Disabled"
    ],
    "defaultValue": "deployIfNotExists"
   }
  },
  "policyDefinitions": [
   {
    "policyDefinitionReferenceId": "DINE-Private-DNS-Azure-File-Sync",
    "policyDefinitionId": "/providers/Microsoft.Authorization/policyDefinitions/06695360-db88-47f6-b976-7500d4297475",
    "parameters": {
     "effect": {
      "value": "[parameters('effect')]"
     },
     "privateDnsZoneId": {
      "value": "[parameters('azureFileprivateDnsZoneId')]"
     }
    },
    "groupNames": []
   },
   {
    "policyDefinitionReferenceId": "DINE-Private-DNS-Azure-Web",
    "policyDefinitionId": "/providers/Microsoft.Authorization/policyDefinitions/0b026355-49cb-467b-8ac4-f777874e175a",
    "parameters": {
     "effect": {
      "value": "[parameters('effect')]"
     },
     "privateDnsZoneId": {
      "value": "[parameters('azureWebPrivateDnsZoneId')]"
     }
    },
    "groupNames": []
   },
   {
    "policyDefinitionReferenceId": "DINE-Private-DNS-Azure-Batch",
    "policyDefinitionId": "/providers/Microsoft.Authorization/policyDefinitions/4ec38ebc-381f-45ee-81a4-acbc4be878f8",
    "parameters": {
     "effect": {
      "value": "[parameters('effect')]"
     },
     "privateDnsZoneId": {
      "value": "[parameters('azureBatchPrivateDnsZoneId')]"
     }
    },
    "groupNames": []
   },
   {
    "policyDefinitionReferenceId": "DINE-Private-DNS-Azure-App",
    "policyDefinitionId": "/providers/Microsoft.Authorization/policyDefinitions/7a860e27-9ca2-4fc6-822d-c2d248c300df",
    "parameters": {
     "effect": {
      "value": "[parameters('effect')]"
     },
     "privateDnsZoneId": {
      "value": "[parameters('azureAppPrivateDnsZoneId')]"
     }
    },
    "groupNames": []
   },
   {
    "policyDefinitionReferenceId": "DINE-Private-DNS-Azure-Site-Recovery",
    "policyDefinitionId": "/providers/Microsoft.Authorization/policyDefinitions/942bd215-1a66-44be-af65-6a1c0318dbe2",
    "parameters": {
     "effect": {
      "value": "[parameters('effect')]"
     },
     "privateDnsZoneId": {
      "value": "[parameters('azureAsrPrivateDnsZoneId')]"
     }
    },
    "groupNames": []
   },
   {
    "policyDefinitionReferenceId": "DINE-Private-DNS-Azure-IoT",
    "policyDefinitionId": "/providers/Microsoft.Authorization/policyDefinitions/aaa64d2d-2fa3-45e5-b332-0b031b9b30e8",
    "parameters": {
     "effect": {
      "value": "[parameters('effect')]"
     },
     "privateDnsZoneId": {
      "value": "[parameters('azureIotPrivateDnsZoneId')]"
     }
    },
    "groupNames": []
   },
   {
    "policyDefinitionReferenceId": "DINE-Private-DNS-Azure-KeyVault",
    "policyDefinitionId": "/providers/Microsoft.Authorization/policyDefinitions/ac673a9a-f77d-4846-b2d8-a57f8e1c01d4",
    "parameters": {
     "effect": {
      "value": "[parameters('effect')]"
     },
     "privateDnsZoneId": {
      "value": "[parameters('azureKeyVaultPrivateDnsZoneId')]"
     }
    },
    "groupNames": []
   },
   {
    "policyDefinitionReferenceId": "DINE-Private-DNS-Azure-SignalR",
    "policyDefinitionId": "/providers/Microsoft.Authorization/policyDefinitions/b0e86710-7fb7-4a6c-a064-32e9b829509e",
    "parameters": {
     "effect": {
      "value": "[parameters('effect')]"
     },
     "privateDnsZoneId": {
      "value": "[parameters('azureSignalRPrivateDnsZoneId')]"
     }
    },
    "groupNames": []
   },
   {
    "policyDefinitionReferenceId": "DINE-Private-DNS-Azure-AppServices",
    "policyDefinitionId": "/providers/Microsoft.Authorization/policyDefinitions/b318f84a-b872-429b-ac6d-a01b96814452",
    "parameters": {
     "effect": {
      "value": "[parameters('effect')]"
     },
     "privateDnsZoneId": {
      "value": "[parameters('azureAppServicesPrivateDnsZoneId')]"
     }
    },
    "groupNames": []
   },
   {
    "policyDefinitionReferenceId": "DINE-Private-DNS-Azure-EventGridTopics",
    "policyDefinitionId": "/providers/Microsoft.Authorization/policyDefinitions/baf19753-7502-405f-8745-370519b20483",
    "parameters": {
     "effect": {
      "value": "[parameters('effect1')]"
     },
     "privateDnsZoneId": {
      "value": "[parameters('azureEventGridTopicsPrivateDnsZoneId')]"
     }
    },
    "groupNames": []
   },
   {
    "policyDefinitionReferenceId": "DINE-Private-DNS-Azure-DiskAccess",
    "policyDefinitionId": "/providers/Microsoft.Authorization/policyDefinitions/bc05b96c-0b36-4ca9-82f0-5c53f96ce05a",
    "parameters": {
     "effect": {
      "value": "[parameters('effect')]"
     },
     "privateDnsZoneId": {
      "value": "[parameters('azureDiskAccessPrivateDnsZoneId')]"
     }
    },
    "groupNames": []
   },
   {
    "policyDefinitionReferenceId": "DINE-Private-DNS-Azure-CognitiveServices",
    "policyDefinitionId": "/providers/Microsoft.Authorization/policyDefinitions/c4bc6f10-cb41-49eb-b000-d5ab82e2a091",
    "parameters": {
     "effect": {
      "value": "[parameters('effect')]"
     },
     "privateDnsZoneId": {
      "value": "[parameters('azureCognitiveServicesPrivateDnsZoneId')]"
     }
    },
    "groupNames": []
   },
   {
    "policyDefinitionReferenceId": "DINE-Private-DNS-Azure-IoTHubs",
    "policyDefinitionId": "/providers/Microsoft.Authorization/policyDefinitions/c99ce9c1-ced7-4c3e-aca0-10e69ce0cb02",
    "parameters": {
     "effect": {
      "value": "[parameters('effect1')]"
     },
     "privateDnsZoneId": {
      "value": "[parameters('azureIotHubsPrivateDnsZoneId')]"
     }
    },
    "groupNames": []
   },
   {
    "policyDefinitionReferenceId": "DINE-Private-DNS-Azure-EventGridDomains",
    "policyDefinitionId": "/providers/Microsoft.Authorization/policyDefinitions/d389df0a-e0d7-4607-833c-75a6fdac2c2d",
    "parameters": {
     "effect": {
      "value": "[parameters('effect1')]"
     },
     "privateDnsZoneId": {
      "value": "[parameters('azureEventGridDomainsPrivateDnsZoneId')]"
     }
    },
    "groupNames": []
   },
   {
    "policyDefinitionReferenceId": "DINE-Private-DNS-Azure-RedisCache",
    "policyDefinitionId": "/providers/Microsoft.Authorization/policyDefinitions/e016b22b-e0eb-436d-8fd7-160c4eaed6e2",
    "parameters": {
     "effect": {
      "value": "[parameters('effect')]"
     },
     "privateDnsZoneId": {
      "value": "[parameters('azureRedisCachePrivateDnsZoneId')]"
     }
    },
    "groupNames": []
   },
   {
    "policyDefinitionReferenceId": "DINE-Private-DNS-Azure-ACR",
    "policyDefinitionId": "/providers/Microsoft.Authorization/policyDefinitions/e9585a95-5b8c-4d03-b193-dc7eb5ac4c32",
    "parameters": {
     "effect": {
      "value": "[parameters('effect')]"
     },
     "privateDnsZoneId": {
      "value": "[parameters('azureAcrPrivateDnsZoneId')]"
     }
    },
    "groupNames": []
   },
   {
    "policyDefinitionReferenceId": "DINE-Private-DNS-Azure-EventHubNamespace",
    "policyDefinitionId": "/providers/Microsoft.Authorization/policyDefinitions/ed66d4f5-8220-45dc-ab4a-20d1749c74e6",
    "parameters": {
     "effect": {
      "value": "[parameters('effect')]"
     },
     "privateDnsZoneId": {
      "value": "[parameters('azureEventHubNamespacePrivateDnsZoneId')]"
     }
    },
    "groupNames": []
   },
   {
    "policyDefinitionReferenceId": "DINE-Private-DNS-Azure-MachineLearningWorkspace",
    "policyDefinitionId": "/providers/Microsoft.Authorization/policyDefinitions/ee40564d-486e-4f68-a5ca-7a621edae0fb",
    "parameters": {
     "effect": {
      "value": "[parameters('effect')]"
     },
     "privateDnsZoneId": {
      "value": "[parameters('azureMachineLearningWorkspacePrivateDnsZoneId')]"
     }
    },
    "groupNames": []
   },
   {
    "policyDefinitionReferenceId": "DINE-Private-DNS-Azure-ServiceBusNamespace",
    "policyDefinitionId": "/providers/Microsoft.Authorization/policyDefinitions/f0fcf93c-c063-4071-9668-c47474bd3564",
    "parameters": {
     "effect": {
      "value": "[parameters('effect')]"
     },
     "privateDnsZoneId": {
      "value": "[parameters('azureServiceBusNamespacePrivateDnsZoneId')]"
     }
    },
    "groupNames": []
   },
   {
    "policyDefinitionReferenceId": "DINE-Private-DNS-Azure-CognitiveSearch",
    "policyDefinitionId": "/providers/Microsoft.Authorization/policyDefinitions/fbc14a67-53e4-4932-abcc-2049c6706009",
    "parameters": {
     "effect": {
      "value": "[parameters('effect')]"
     },
     "privateDnsZoneId": {
      "value": "[parameters('azureCognitiveSearchPrivateDnsZoneId')]"
     }
    },
    "groupNames": []
   }
  ]
 },
 "id": "/providers/Microsoft.Management/managementGroups/management_group_id/providers/Microsoft.Authorization/policySetDefinitions/Deploy-Private-DNS-Zones",
 "type": "Microsoft.Authorization/policySetDefinitions",
 "name": "Deploy-Private-DNS-Zones"
}